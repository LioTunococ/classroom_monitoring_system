{% extends 'attendance/base.html' %}
{% block content %}
<div class="d-flex justify-content-between align-items-center flex-wrap gap-2">
  <h1 class="h4 mb-0">Notifications</h1>
  <form method="post" action="{% url 'attendance:notifications_mark_all_read' %}">{% csrf_token %}
    <button class="btn btn-sm btn-outline-primary" type="submit" {% if unread_count == 0 %}disabled{% endif %}>Mark all as read</button>
  </form>
 </div>

<div class="list-group mt-3">
  {% for n in notifications %}
    <a href="{{ n.url|default:'#' }}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-start">
      <div class="me-3">
        <div class="fw-semibold">{{ n.message }}</div>
        <small class="text-muted">{{ n.created }}</small>
      </div>
      {% if not n.is_read %}<span class="badge bg-danger rounded-pill">New</span>{% endif %}
    </a>
  {% empty %}
    <div class="text-muted">No notifications yet.</div>
  {% endfor %}
</div>
{% endblock %}
